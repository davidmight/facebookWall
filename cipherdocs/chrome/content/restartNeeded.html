<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
	<title>Restart needed :: CipherDocs</title>
	<script language="javascript" type="text/javascript">
		function restart(){
			// Code taken from chrome://toolkit/content/mozapps/extensions/extensions.js
			const nsIAppStartup = Components.interfaces.nsIAppStartup;
			// Notify all windows that an application quit has been requested.
			var os = Components.classes["@mozilla.org/observer-service;1"]
					.getService(Components.interfaces.nsIObserverService);
			var cancelQuit = Components.classes["@mozilla.org/supports-PRBool;1"]
					.createInstance(Components.interfaces.nsISupportsPRBool);
			os.notifyObservers(cancelQuit, "quit-application-requested", null);
			// Something aborted the quit process. 
			if (cancelQuit.data) return;
			// Notify all windows that an application quit has been granted.
			os.notifyObservers(null, "quit-application-granted", null);
			// Enumerate all windows and call shutdown handlers
			var wm = Components.classes["@mozilla.org/appshell/window-mediator;1"]
								.getService(Components.interfaces.nsIWindowMediator);
			var windows = wm.getEnumerator(null);
			while (windows.hasMoreElements()) {
				var win = windows.getNext();
				if (("tryToClose" in win) && !win.tryToClose()) return;
			}
			Components.classes["@mozilla.org/toolkit/app-startup;1"].getService(nsIAppStartup)
					.quit(nsIAppStartup.eRestart | nsIAppStartup.eAttemptQuit);
		}
	</script>
	
	<style type="text/css">
		imagestyle
		{
			position:absolute;
			left:0px;
			top:0px;
		}
		p.sansserif{font-family:Arial,Helvetica,sans-serif;}
		body {
			width: 325px;
			word-wrap: break-word;
			background-color: #ffffff;
		}
	</style>
</head>
<body>
	<img class="imagestyle" src="images/cipherdocs_logo.jpg"/>
	<p class="sansserif">CipherDocs has successfully enabled 256-bit AES security. Please restart your browser for these changes to take effect.</p>

	<form action = "" method="post">
		<input type="button" value="Restart now" onClick="restart();">
		<input type="button" value="Restart later" onClick="javascript:window.close();">
	</form>
	
</body>
</html>