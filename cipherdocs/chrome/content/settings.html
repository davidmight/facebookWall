<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
	<title>CipherDocs : Settings</title>
	<script type="application/javascript" src="chrome://cipherdocs/content/cipherdocsBootstrap.js"></script>
	<script language="javascript" type="text/javascript">
		function setTrue() {
			var settings = { username:document.getElementById('username').value, 
						password:document.getElementById('password').value,
						host:document.getElementById('host').value, 
						port:document.getElementById('port').value 
					    };
			if(window.opener.modalSharedStruct){ //started by extension
				setParentValue(settings);
			}else{ //invoked from options menu
				setUpCipherDocs();
				saveUserSettings(settings);				
			}
			window.close();
		}
	
		function setParentValue(val){
			if (window.dialogArguments != null) {
				window.dialogArguments.retVal = val;
			} else {
				if ((!window.opener.closed) && 
						(window.opener.modalSharedStruct)) {
					window.opener.modalSharedStruct.retVal = val;
				}
			}
		}
		
	</script>
	
	<style type="text/css">
		imagestyle
		{
			position:absolute;
			left:0px;
			top:0px;
		}
		p.sansserif{font-family:Arial,Helvetica,sans-serif;}
		body {
			width: 325px;
			word-wrap: break-word;
			background-color: #ffffff;
		}
	</style>
</head>
<body onload="document.settingsForm.host.focus()">
	<img class="imagestyle" src="images/cipherdocs_logo.jpg"/>
	
	<script language="javascript" type="text/javascript">
		if(!window.opener.modalSharedStruct){ document.write("NOTE: Changes may not take effect until a browser restart.")}
	</script>
	<p class="sansserif">If you use a proxy to access the internet on this machine, please enter the details below.</p>

	<form name="settingsForm" action = "javascript:setTrue();" method="post">
		<table width="100%" align="center">
			<tr>
				<td align="left">Proxy Host</td>
				<td align="left"><input id="host" type="text" /></td>
			</tr>
			<tr>
				<td align="left">Proxy Port</td>
				<td align="left"><input id="port" type="text" /></td>
			</tr>
			<tr>
				<td align="left">Proxy Username</td>
				<td align="left"><input id="username" type="text" /></td>
			</tr>
			<tr>
				<td align="left">Proxy Password</td>
				<td align="left"><input id="password" type="password" /></td>
			</tr>

			<tr>
				<td colspan="2" align="right">
					<input type="submit" style="visibility: hidden;" />
					<input type="button" value="OK" onclick="javascript:setTrue();"/>
				</td>
       		</tr>
		</table>
	</form>
	
</body>
</html>